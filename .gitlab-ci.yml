# This file is generated by GitLab CI
Continuous Integration Tests:
  script:
  - "# Install dependencies"
  - virtualenv .env -p python3
  - source .env/bin/activate
  - pip install -r dependencies.txt
  - ''
  - "# Util"
  - APPS=$(python3 <<<"from sugarcub import settings; print(','.join(settings.PROJECT_APPS))")
  - chmod u+x manage.py
  - ''
  - "# Generate needed data that aren't in the repo (i18n)"
  - "./manage.py compilemessages"
  - for i in $(echo $APPS | sed -e 's/,/ /g') ; do pushd $i ; [ -d locale ] && ../manage.py
    compilemessages ; popd ; done
  - ''
  - "# Run tests"
  - xvfb-run py.test
  tags:
  except:
  - tags
